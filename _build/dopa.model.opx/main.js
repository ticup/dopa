require("opa-js-runtime-cps");
require("opabsl.opp");
require("stdlib.database.mongo.opx");
var ___server_ast_fa5e194d = BslCps_topwait(___register_server_code_ec6de8cf({package_:"dopa.model",adhoc_e:[{td:[],rd:[],r:[false],id:["`_v1_create_room_dopa.model`","`_v1_leave_room_dopa.model`","`_v1_send_message_dopa.model`","`_v1_get_room_chan_dopa.model`","`_v1_join_room_dopa.model`","`_v1_subscribe_for_rooms_dopa.model`","`_v1_unsubscribe_for_rooms_dopa.model`"],i:{some:"`_v1_Model_dopa.model`"},d:js_void,c:{some:"__v2_Model_fa5e194d"}},{td:[],rd:[],r:[false],id:["`_v12_send_stdlib.core.rpc.core`"],i:{some:"`_v1_send_message_dopa.model`"},d:js_void,c:{some:"__v2_send_message_fa5e194d"}},{td:[],rd:[],r:[false],id:["`_v12_send_stdlib.core.rpc.core`"],i:{some:"`_v1_leave_room_dopa.model`"},d:js_void,c:{some:"__v2_leave_room_fa5e194d"}},{td:[],rd:[],r:[false],id:["`_v12_send_stdlib.core.rpc.core`"],i:{some:"`_v1_join_room_dopa.model`"},d:js_void,c:{some:"__v2_join_room_fa5e194d"}},{td:[],rd:[],r:[false],id:["`_v37_t_dopa.model`","`_v12_send_stdlib.core.rpc.core`"],i:{some:"`_v1_get_room_chan_dopa.model`"},d:js_void,c:{some:"__v2_get_room_chan_fa5e194d"}},{td:[],rd:[],r:[false],id:["`_v37_t_dopa.model`","`_v12_send_stdlib.core.rpc.core`"],i:{some:"`_v1_create_room_dopa.model`"},d:js_void,c:{some:"__v2_create_room_fa5e194d"}},{td:[],rd:[],r:[false],id:["`_v37_t_dopa.model`","`_v12_send_stdlib.core.rpc.core`"],i:{some:"`_v1_unsubscribe_for_rooms_dopa.model`"},d:js_void,c:{some:"__v2_unsubscribe_for_rooms_fa5e194d"}},{td:[],rd:[],r:[false],id:["`_v37_t_dopa.model`","`_v12_send_stdlib.core.rpc.core`"],i:{some:"`_v1_subscribe_for_rooms_dopa.model`"},d:js_void,c:{some:"__v2_subscribe_for_rooms_fa5e194d"}},{td:[],rd:[],r:[true],id:["`__jsout_dopa.model`","`_v1_jsout_dopa.model`","`_v2_jsout_dopa.model`"],i:{some:"`__register_js_ast_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[true],id:["`_v63_t_dopa.model`","`_v1_Opa2Js_to_string_stdlib.core.rpc.core`"],i:{some:"`_v2_jsout_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[true],id:["`_v1_set_lazy_dopa.model`","`_v1_Opa2Js_to_string_stdlib.core.rpc.core`"],i:{some:"`_v1_jsout_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[true],id:["`_v61_t_dopa.model`","`_v1_Opa2Js_to_string_stdlib.core.rpc.core`"],i:{some:"`__jsout_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[true],id:["`_v14_an_dopa.model`"],i:{some:"`_v1_set_lazy_dopa.model`"},d:js_void,c:{some:"__v2_set_lazy_fa5e194d"}},{td:[],rd:[],r:[false],id:["`_v1_rooms_channel_handler_dopa.model`","`_v59_t_dopa.model`","`_v10_make_stdlib.core.rpc.core`"],i:{some:"`_v14_an_dopa.model`"},d:js_void,c:{some:"__v22_an_fa5e194d"}},{td:[],rd:[],r:[false],id:["`_v2_notifyAll_dopa.model`","`_v1_room_channel_handler_dopa.model`","`_v42_t_dopa.model`","`_v46_t_dopa.model`","`_v47_t_dopa.model`","`_v58_t_dopa.model`","`_v10_make_stdlib.core.rpc.core`","`_v12_send_stdlib.core.rpc.core`"],i:{some:"`_v1_rooms_channel_handler_dopa.model`"},d:js_void,c:{some:"__v2_rooms_channel_handler_fa5e194d"}},{td:[],rd:[],r:[false],id:["`_v1_notify_dopa.model`"],i:{some:"`_v2_notifyAll_dopa.model`"},d:js_void,c:{some:"__v4_notifyAll_fa5e194d"}},{td:[],rd:[],r:[false],id:["`_v41_t_dopa.model`","`_v12_send_stdlib.core.rpc.core`"],i:{some:"`_v1_notify_dopa.model`"},d:js_void,c:{some:"__v2_notify_fa5e194d"}},{td:[],rd:[],r:[false],id:["`_v3_notifyAll_dopa.model`","`_v1_broadCastUsers_dopa.model`","`_v1_t_dopa.model`","`_v5_t_dopa.model`","`_v16_t_dopa.model`","`_v24_t_dopa.model`","`_v25_t_dopa.model`","`_v37_t_dopa.model`","`_v12_send_stdlib.core.rpc.core`"],i:{some:"`_v1_room_channel_handler_dopa.model`"},d:js_void,c:{some:"__v2_room_channel_handler_fa5e194d"}},{td:["\"list\""],rd:[],r:[false],id:["`_v3_notifyAll_dopa.model`"],i:{some:"`_v1_broadCastUsers_dopa.model`"},d:js_void,c:{some:"__v2_broadCastUsers_fa5e194d"}},{td:[],rd:[],r:[false],id:["`_v9_an_dopa.model`"],i:{some:"`_v3_notifyAll_dopa.model`"},d:js_void,c:{some:"__v5_notifyAll_fa5e194d"}},{td:[],rd:[],r:[false],id:["`_v12_send_stdlib.core.rpc.core`"],i:{some:"`_v9_an_dopa.model`"},d:js_void,c:{some:"__v17_an_fa5e194d"}},{td:[],rd:[],r:[true],id:["`_v1_dopa_dopa.model`","`_v1_DbMongoSet_indexes_stdlib.database.mongo`"],i:{some:"`_v3__index_setup_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[true],id:["`_v1_dopa_dopa.model`","`_v1_DbMongoSet_indexes_stdlib.database.mongo`"],i:{some:"`_v2__index_setup_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[true],id:["`_v1_DbMongo_open_stdlib.database.mongo`"],i:{some:"`_v1_dopa_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:[],i:{some:"typedef_user"},d:{t:"\"user\""},c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v99_t_dopa.model`"],i:{some:"typedef_user_and_chan"},d:{t:"\"user_and_chan\""},c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v96_t_dopa.model`"],i:{some:"typedef_client_rooms_channel"},d:{t:"\"client_rooms_channel\""},c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v92_t_dopa.model`"],i:{some:"typedef_client_rooms_msg"},d:{t:"\"client_rooms_msg\""},c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v91_t_dopa.model`"],i:{some:"typedef_client_room_channel"},d:{t:"\"client_room_channel\""},c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v87_t_dopa.model`"],i:{some:"typedef_client_room_msg"},d:{t:"\"client_room_msg\""},c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v82_t_dopa.model`"],i:{some:"typedef_rooms_channel"},d:{t:"\"rooms_channel\""},c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v81_t_dopa.model`"],i:{some:"typedef_rooms_msg"},d:{t:"\"rooms_msg\""},c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v80_t_dopa.model`"],i:{some:"typedef_room_prot"},d:{t:"\"room_prot\""},c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v75_t_dopa.model`"],i:{some:"typedef_room_client"},d:{t:"\"room_client\""},c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v70_t_dopa.model`"],i:{some:"typedef_room_channel"},d:{t:"\"room_channel\""},c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v66_t_dopa.model`"],i:{some:"typedef_room_msg"},d:{t:"\"room_msg\""},c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v65_t_dopa.model`"],i:{some:"typedef_source"},d:{t:"\"source\""},c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v64_t_dopa.model`"],i:{some:"typedef_message"},d:{t:"\"message\""},c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v98_t_dopa.model`"],i:{some:"`_v99_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v97_t_dopa.model`"],i:{some:"`_v98_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v19_t_dopa.model`","`_v28_t_dopa.model`"],i:{some:"`_v97_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v95_t_dopa.model`"],i:{some:"`_v96_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"channel\""],rd:[],r:[false],id:["`_v94_t_dopa.model`"],i:{some:"`_v95_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v93_t_dopa.model`"],i:{some:"`_v94_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"client_rooms_msg\""],rd:[],r:[false],id:[],i:{some:"`_v93_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v42_t_dopa.model`"],i:{some:"`_v92_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v90_t_dopa.model`"],i:{some:"`_v91_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"channel\""],rd:[],r:[false],id:["`_v89_t_dopa.model`"],i:{some:"`_v90_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v88_t_dopa.model`"],i:{some:"`_v89_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"client_room_msg\""],rd:[],r:[false],id:[],i:{some:"`_v88_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v86_t_dopa.model`"],i:{some:"`_v87_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v1_t_dopa.model`","`_v5_t_dopa.model`","`_v85_t_dopa.model`"],i:{some:"`_v86_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v84_t_dopa.model`"],i:{some:"`_v85_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"list\""],rd:[],r:[false],id:["`_v83_t_dopa.model`"],i:{some:"`_v84_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v18_t_dopa.model`"],i:{some:"`_v83_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v61_t_dopa.model`"],i:{some:"`_v82_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v37_t_dopa.model`"],i:{some:"`_v81_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v79_t_dopa.model`"],i:{some:"`_v80_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v78_t_dopa.model`"],i:{some:"`_v79_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v77_t_dopa.model`"],i:{some:"`_v78_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v76_t_dopa.model`"],i:{some:"`_v77_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v141_t_stdlib.core`"],i:{some:"`_v76_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v74_t_dopa.model`"],i:{some:"`_v75_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v73_t_dopa.model`"],i:{some:"`_v74_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v72_t_dopa.model`"],i:{some:"`_v73_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v71_t_dopa.model`"],i:{some:"`_v72_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v42_t_stdlib.core.args`"],i:{some:"`_v71_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v69_t_dopa.model`"],i:{some:"`_v70_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"channel\""],rd:[],r:[false],id:["`_v68_t_dopa.model`"],i:{some:"`_v69_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v67_t_dopa.model`"],i:{some:"`_v68_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"room_msg\""],rd:[],r:[false],id:[],i:{some:"`_v67_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v46_t_dopa.model`"],i:{some:"`_v66_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v20_t_dopa.model`"],i:{some:"`_v65_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v9_t_dopa.model`"],i:{some:"`_v64_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"finite_single_thread_lazy\""],rd:[],r:[false],id:["`_v62_t_dopa.model`"],i:{some:"`_v63_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v61_t_dopa.model`"],i:{some:"`_v62_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"channel\""],rd:[],r:[false],id:["`_v60_t_dopa.model`"],i:{some:"`_v61_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v59_t_dopa.model`"],i:{some:"`_v60_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"rooms_msg\""],rd:[],r:[false],id:[],i:{some:"`_v59_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v1_t_dopa.model`","`_v15_t_dopa.model`","`_v57_t_dopa.model`"],i:{some:"`_v58_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v50_t_dopa.model`"],i:{some:"`_v57_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v49_t_dopa.model`"],i:{some:"`_v50_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"channel\""],rd:[],r:[false],id:["`_v48_t_dopa.model`"],i:{some:"`_v49_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v46_t_dopa.model`"],i:{some:"`_v48_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v1_t_dopa.model`","`_v5_t_dopa.model`","`_v15_t_dopa.model`"],i:{some:"`_v47_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v1_t_dopa.model`","`_v44_t_dopa.model`","`_v45_t_dopa.model`"],i:{some:"`_v46_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v18_t_dopa.model`"],i:{some:"`_v45_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v28_t_dopa.model`","`_v43_t_dopa.model`"],i:{some:"`_v44_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v18_t_dopa.model`"],i:{some:"`_v43_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v41_t_dopa.model`"],i:{some:"`_v42_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v40_t_dopa.model`"],i:{some:"`_v41_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"list\""],rd:[],r:[false],id:["`_v39_t_dopa.model`"],i:{some:"`_v40_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v38_t_dopa.model`"],i:{some:"`_v39_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"room_prot\""],rd:[],r:[false],id:[],i:{some:"`_v38_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v29_t_dopa.model`","`_v32_t_dopa.model`","`_v35_t_dopa.model`","`_v36_t_dopa.model`"],i:{some:"`_v37_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v18_t_dopa.model`"],i:{some:"`_v36_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v18_t_dopa.model`"],i:{some:"`_v35_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v30_t_dopa.model`","`_v31_t_dopa.model`"],i:{some:"`_v32_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"client_rooms_channel\""],rd:[],r:[false],id:[],i:{some:"`_v31_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v18_t_dopa.model`"],i:{some:"`_v30_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v28_t_dopa.model`"],i:{some:"`_v29_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"client_room_channel\""],rd:[],r:[false],id:[],i:{some:"`_v28_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v5_t_dopa.model`","`_v15_t_dopa.model`","`_v24_t_dopa.model`"],i:{some:"`_v25_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v23_t_dopa.model`"],i:{some:"`_v24_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v22_t_dopa.model`"],i:{some:"`_v23_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v21_t_dopa.model`","`_v27_t_stdlib.core.date`"],i:{some:"`_v22_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v20_t_dopa.model`"],i:{some:"`_v21_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v19_t_dopa.model`"],i:{some:"`_v20_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v18_t_dopa.model`"],i:{some:"`_v19_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"user\""],rd:[],r:[false],id:[],i:{some:"`_v18_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v5_t_dopa.model`","`_v10_t_dopa.model`","`_v15_t_dopa.model`"],i:{some:"`_v16_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v14_t_dopa.model`"],i:{some:"`_v15_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"list\""],rd:[],r:[false],id:[],i:{some:"`_v14_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v9_t_dopa.model`"],i:{some:"`_v10_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v8_t_dopa.model`"],i:{some:"`_v9_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v7_t_dopa.model`","`_v27_t_stdlib.core.date`"],i:{some:"`_v8_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v6_t_dopa.model`"],i:{some:"`_v7_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"source\""],rd:[],r:[false],id:[],i:{some:"`_v6_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v3_t_dopa.model`","`_v4_t_dopa.model`"],i:{some:"`_v5_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"room_client\""],rd:[],r:[false],id:[],i:{some:"`_v4_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`_v2_t_dopa.model`"],i:{some:"`_v3_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"room_channel\""],rd:[],r:[false],id:[],i:{some:"`_v2_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:[],rd:[],r:[false],id:["`__t_dopa.model`"],i:{some:"`_v1_t_dopa.model`"},d:js_void,c:{none:js_void}},{td:["\"message\""],rd:[],r:[false],id:[],i:{some:"`__t_dopa.model`"},d:js_void,c:{none:js_void}}]},cont(BslCps_topk)));
global.___t_fa5e194d = {TyName_ident:"message",TyName_args:__v10_t_ec6de8cf};
global.__v1_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:___t_fa5e194d,label:"message"}};
global.__v2_t_fa5e194d = {TyName_ident:"room_channel",TyName_args:__v10_t_ec6de8cf};
global.__v3_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:__v2_t_fa5e194d,label:"room_channel"}};
global.__v4_t_fa5e194d = {TyName_ident:"room_client",TyName_args:__v10_t_ec6de8cf};
global.__v5_t_fa5e194d = {tl:__v3_t_fa5e194d,hd:{ty:__v4_t_fa5e194d,label:"room"}};
global.__v6_t_fa5e194d = {TyName_ident:"source",TyName_args:__v10_t_ec6de8cf};
global.__v7_t_fa5e194d = {tl:__v278_t_2b6d75d2,hd:{ty:__v6_t_fa5e194d,label:"source"}};
global.__v8_t_fa5e194d = {tl:__v7_t_fa5e194d,hd:{ty:__v27_t_7e5812a5,label:"date"}};
global.__v9_t_fa5e194d = {TyRecord_row:__v8_t_fa5e194d};
global.__v10_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:__v9_t_fa5e194d,label:"message"}};
global.__v11_t_fa5e194d = {tl:__v13_t_e3ca26a0,hd:{ty:__v60_t_ec6de8cf,label:"id"}};
global.__v12_t_fa5e194d = {TyRecord_row:__v11_t_fa5e194d};
global.__v13_t_fa5e194d = {tl:__v10_t_ec6de8cf,hd:__v12_t_fa5e194d};
global.__v14_t_fa5e194d = {TyName_ident:"list",TyName_args:__v13_t_fa5e194d};
global.__v15_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:__v14_t_fa5e194d,label:"users"}};
global.__v16_t_fa5e194d = {TySum_col:{tl:{tl:{tl:{tl:{nil:js_void},hd:__v15_t_fa5e194d},hd:__v5_t_fa5e194d},hd:__v10_t_fa5e194d},hd:___t_b6501532}};
global.__v17_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:__v16_t_ec6de8cf,label:"system"}};
global.__v18_t_fa5e194d = {TyName_ident:"user",TyName_args:__v10_t_ec6de8cf};
global.__v19_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:__v18_t_fa5e194d,label:"user"}};
global.__v20_t_fa5e194d = {TySum_col:{tl:{tl:{nil:js_void},hd:__v19_t_fa5e194d},hd:__v17_t_fa5e194d}};
global.__v21_t_fa5e194d = {tl:__v278_t_2b6d75d2,hd:{ty:__v20_t_fa5e194d,label:"source"}};
global.__v22_t_fa5e194d = {tl:__v21_t_fa5e194d,hd:{ty:__v27_t_7e5812a5,label:"date"}};
global.__v23_t_fa5e194d = {TyRecord_row:__v22_t_fa5e194d};
global.__v24_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:__v23_t_fa5e194d,label:"message"}};
global.__v25_t_fa5e194d = {TySum_col:{tl:{tl:{tl:{tl:{nil:js_void},hd:__v15_t_fa5e194d},hd:__v5_t_fa5e194d},hd:__v24_t_fa5e194d},hd:___t_b6501532}};
global.__v26_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:__v22_t_ec6de8cf,label:"password"}};
global.__v27_t_fa5e194d = {tl:__v26_t_fa5e194d,hd:{ty:__v60_t_ec6de8cf,label:"get"}};
global.__v28_t_fa5e194d = {TyName_ident:"client_room_channel",TyName_args:__v10_t_ec6de8cf};
global.__v29_t_fa5e194d = {tl:__v27_t_fa5e194d,hd:{ty:__v28_t_fa5e194d,label:"client_room_chan"}};
global.__v30_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:__v18_t_fa5e194d,label:"listen"}};
global.__v31_t_fa5e194d = {TyName_ident:"client_rooms_channel",TyName_args:__v10_t_ec6de8cf};
global.__v32_t_fa5e194d = {tl:__v30_t_fa5e194d,hd:{ty:__v31_t_fa5e194d,label:"client_rooms_chan"}};
global.__v33_t_fa5e194d = {tl:__v26_t_fa5e194d,hd:{ty:__v22_t_ec6de8cf,label:"name"}};
global.__v34_t_fa5e194d = {tl:__v33_t_fa5e194d,hd:{ty:__v60_t_ec6de8cf,label:"create"}};
global.__v35_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:__v18_t_fa5e194d,label:"remove"}};
global.__v36_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:__v18_t_fa5e194d,label:"stoplisten"}};
global.__v37_t_fa5e194d = {TySum_col:{tl:{tl:{tl:{tl:{tl:{nil:js_void},hd:__v36_t_fa5e194d},hd:__v35_t_fa5e194d},hd:__v34_t_fa5e194d},hd:__v32_t_fa5e194d},hd:__v29_t_fa5e194d}};
global.__v38_t_fa5e194d = {TyName_ident:"room_prot",TyName_args:__v10_t_ec6de8cf};
global.__v39_t_fa5e194d = {tl:__v10_t_ec6de8cf,hd:__v38_t_fa5e194d};
global.__v40_t_fa5e194d = {TyName_ident:"list",TyName_args:__v39_t_fa5e194d};
global.__v41_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:__v40_t_fa5e194d,label:"rooms"}};
global.__v42_t_fa5e194d = {TyRecord_row:__v41_t_fa5e194d};
global.__v43_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:__v18_t_fa5e194d,label:"join"}};
global.__v44_t_fa5e194d = {tl:__v43_t_fa5e194d,hd:{ty:__v28_t_fa5e194d,label:"chan"}};
global.__v45_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:__v18_t_fa5e194d,label:"leave"}};
global.__v46_t_fa5e194d = {TySum_col:{tl:{tl:{tl:{nil:js_void},hd:__v1_t_fa5e194d},hd:__v45_t_fa5e194d},hd:__v44_t_fa5e194d}};
global.__v47_t_fa5e194d = {TySum_col:{tl:{tl:{tl:{tl:{nil:js_void},hd:__v15_t_fa5e194d},hd:__v5_t_fa5e194d},hd:__v1_t_fa5e194d},hd:___t_b6501532}};
global.__v48_t_fa5e194d = {tl:__v10_t_ec6de8cf,hd:__v46_t_fa5e194d};
global.__v49_t_fa5e194d = {TyName_ident:"channel",TyName_args:__v48_t_fa5e194d};
global.__v50_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:__v49_t_fa5e194d,label:"room_channel"}};
global.__v51_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:__v22_t_ec6de8cf,label:"some"}};
global.__v52_t_fa5e194d = {TySum_col:{tl:{tl:{nil:js_void},hd:__v51_t_fa5e194d},hd:__v83_t_ec6de8cf}};
global.__v53_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:__v52_t_fa5e194d,label:"password"}};
global.__v54_t_fa5e194d = {tl:__v53_t_fa5e194d,hd:{ty:__v22_t_ec6de8cf,label:"name"}};
global.__v55_t_fa5e194d = {tl:__v54_t_fa5e194d,hd:{ty:__v60_t_ec6de8cf,label:"id"}};
global.__v56_t_fa5e194d = {TyRecord_row:__v55_t_fa5e194d};
global.__v57_t_fa5e194d = {tl:__v50_t_fa5e194d,hd:{ty:__v56_t_fa5e194d,label:"room"}};
global.__v58_t_fa5e194d = {TySum_col:{tl:{tl:{tl:{tl:{nil:js_void},hd:__v15_t_fa5e194d},hd:__v57_t_fa5e194d},hd:__v1_t_fa5e194d},hd:___t_b6501532}};
global.__v59_t_fa5e194d = {TyName_ident:"rooms_msg",TyName_args:__v10_t_ec6de8cf};
global.__v60_t_fa5e194d = {tl:__v10_t_ec6de8cf,hd:__v59_t_fa5e194d};
global.__v61_t_fa5e194d = {TyName_ident:"channel",TyName_args:__v60_t_fa5e194d};
global.__v62_t_fa5e194d = {tl:__v10_t_ec6de8cf,hd:__v61_t_fa5e194d};
global.__v63_t_fa5e194d = {TyName_ident:"finite_single_thread_lazy",TyName_args:__v62_t_fa5e194d};
global.__v64_t_fa5e194d = {body:__v9_t_fa5e194d,quantifier:__v14_t_ec6de8cf};
global.__v65_t_fa5e194d = {body:__v20_t_fa5e194d,quantifier:__v14_t_ec6de8cf};
global.__v66_t_fa5e194d = {body:__v46_t_fa5e194d,quantifier:__v14_t_ec6de8cf};
global.__v67_t_fa5e194d = {TyName_ident:"room_msg",TyName_args:__v10_t_ec6de8cf};
global.__v68_t_fa5e194d = {tl:__v10_t_ec6de8cf,hd:__v67_t_fa5e194d};
global.__v69_t_fa5e194d = {TyName_ident:"channel",TyName_args:__v68_t_fa5e194d};
global.__v70_t_fa5e194d = {body:__v69_t_fa5e194d,quantifier:__v14_t_ec6de8cf};
global.__v71_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:__v42_t_32b3d351,label:"password"}};
global.__v72_t_fa5e194d = {tl:__v71_t_fa5e194d,hd:{ty:__v22_t_ec6de8cf,label:"name"}};
global.__v73_t_fa5e194d = {tl:__v72_t_fa5e194d,hd:{ty:__v60_t_ec6de8cf,label:"id"}};
global.__v74_t_fa5e194d = {TyRecord_row:__v73_t_fa5e194d};
global.__v75_t_fa5e194d = {body:__v74_t_fa5e194d,quantifier:__v14_t_ec6de8cf};
global.__v76_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:__v141_t_ec6de8cf,label:"password"}};
global.__v77_t_fa5e194d = {tl:__v76_t_fa5e194d,hd:{ty:__v22_t_ec6de8cf,label:"name"}};
global.__v78_t_fa5e194d = {tl:__v77_t_fa5e194d,hd:{ty:__v60_t_ec6de8cf,label:"id"}};
global.__v79_t_fa5e194d = {TyRecord_row:__v78_t_fa5e194d};
global.__v80_t_fa5e194d = {body:__v79_t_fa5e194d,quantifier:__v14_t_ec6de8cf};
global.__v81_t_fa5e194d = {body:__v37_t_fa5e194d,quantifier:__v14_t_ec6de8cf};
global.__v82_t_fa5e194d = {body:__v61_t_fa5e194d,quantifier:__v14_t_ec6de8cf};
global.__v83_t_fa5e194d = {tl:__v10_t_ec6de8cf,hd:__v18_t_fa5e194d};
global.__v84_t_fa5e194d = {TyName_ident:"list",TyName_args:__v83_t_fa5e194d};
global.__v85_t_fa5e194d = {tl:__v15_t_ec6de8cf,hd:{ty:__v84_t_fa5e194d,label:"users"}};
global.__v86_t_fa5e194d = {TySum_col:{tl:{tl:{tl:{tl:{nil:js_void},hd:__v85_t_fa5e194d},hd:__v5_t_fa5e194d},hd:__v1_t_fa5e194d},hd:___t_b6501532}};
global.__v87_t_fa5e194d = {body:__v86_t_fa5e194d,quantifier:__v14_t_ec6de8cf};
global.__v88_t_fa5e194d = {TyName_ident:"client_room_msg",TyName_args:__v10_t_ec6de8cf};
global.__v89_t_fa5e194d = {tl:__v10_t_ec6de8cf,hd:__v88_t_fa5e194d};
global.__v90_t_fa5e194d = {TyName_ident:"channel",TyName_args:__v89_t_fa5e194d};
global.__v91_t_fa5e194d = {body:__v90_t_fa5e194d,quantifier:__v14_t_ec6de8cf};
global.__v92_t_fa5e194d = {body:__v42_t_fa5e194d,quantifier:__v14_t_ec6de8cf};
global.__v93_t_fa5e194d = {TyName_ident:"client_rooms_msg",TyName_args:__v10_t_ec6de8cf};
global.__v94_t_fa5e194d = {tl:__v10_t_ec6de8cf,hd:__v93_t_fa5e194d};
global.__v95_t_fa5e194d = {TyName_ident:"channel",TyName_args:__v94_t_fa5e194d};
global.__v96_t_fa5e194d = {body:__v95_t_fa5e194d,quantifier:__v14_t_ec6de8cf};
global.__v97_t_fa5e194d = {tl:__v19_t_fa5e194d,hd:{ty:__v28_t_fa5e194d,label:"chan"}};
global.__v98_t_fa5e194d = {TyRecord_row:__v97_t_fa5e194d};
global.__v99_t_fa5e194d = {body:__v98_t_fa5e194d,quantifier:__v14_t_ec6de8cf};
global.__v100_t_fa5e194d = {body:__v12_t_fa5e194d,quantifier:__v14_t_ec6de8cf};
var _stypedef_message = BslValue_Tsc_add("message",__v64_t_fa5e194d);
var _stypedef_source = BslValue_Tsc_add("source",__v65_t_fa5e194d);
var _stypedef_room_msg = BslValue_Tsc_add("room_msg",__v66_t_fa5e194d);
var _stypedef_room_channel = BslValue_Tsc_add("room_channel",__v70_t_fa5e194d);
var _stypedef_room_client = BslValue_Tsc_add("room_client",__v75_t_fa5e194d);
var _stypedef_room_prot = BslValue_Tsc_add("room_prot",__v80_t_fa5e194d);
var _stypedef_rooms_msg = BslValue_Tsc_add("rooms_msg",__v81_t_fa5e194d);
var _stypedef_rooms_channel = BslValue_Tsc_add("rooms_channel",__v82_t_fa5e194d);
var _stypedef_client_room_msg = BslValue_Tsc_add("client_room_msg",__v87_t_fa5e194d);
var _stypedef_client_room_channel = BslValue_Tsc_add("client_room_channel",__v91_t_fa5e194d);
var _stypedef_client_rooms_msg = BslValue_Tsc_add("client_rooms_msg",__v92_t_fa5e194d);
var _stypedef_client_rooms_channel = BslValue_Tsc_add("client_rooms_channel",__v96_t_fa5e194d);
var _stypedef_user_and_chan = BslValue_Tsc_add("user_and_chan",__v99_t_fa5e194d);
var _stypedef_user = BslValue_Tsc_add("user",__v100_t_fa5e194d);
global.___dopa_fa5e194d = BslCps_topwait(__v1_open_0f7af08e("dopa",{none:js_void},{none:js_void},cont(BslCps_topk)));
var ____index_setup_fa5e194d = BslCps_topwait(___indexes_0f7af08e(___dopa_fa5e194d,{tl:{nil:js_void},hd:"messages"},{tl:{nil:js_void},hd:{tl:{nil:js_void},hd:"date"}},cont(BslCps_topk)));
var __v1__index_setup_fa5e194d = BslCps_topwait(___indexes_0f7af08e(___dopa_fa5e194d,{tl:{nil:js_void},hd:"users"},{tl:{nil:js_void},hd:{tl:{nil:js_void},hd:"id"}},cont(BslCps_topk)));
global.___new_author_skip_fa5e194d = function ___new_author_skip_fa5e194d(){return BslNumber_Random_string(8);};
global.___new_author_fa5e194d = function ___new_author_fa5e194d(a){return return_tc(a,BslNumber_Random_string(8));};
___new_author_fa5e194d.distant = true;
global.___lazy_rooms_fa5e194d = __v2_make_skip_ec6de8cf(7);
function _____10___skip_fa5e194d(a){return a = a.user,{name:a.name,id:a.id};}
global._____10___fa5e194d = function _____10___fa5e194d(a,b){return return_tc(b,_____10___skip_fa5e194d(a));};
_____10___fa5e194d.distant = true;
global.__v2_an_fa5e194d = function __v2_an_fa5e194d(a,b,c){return function (d,e){return __v32_aux_ec6de8cf(_____10___fa5e194d,d,0,e);};};
__v2_an_fa5e194d.distant = true;
global.___an_fa5e194d = function ___an_fa5e194d(a,b){return function (c,d){return __v1_send_f2f00d5f(a)(c.chan,b,d);};};
___an_fa5e194d.distant = true;
function __v27_an_fa5e194d(a,b,c){return function (d){return ___an_iter_ec6de8cf(0,___an_fa5e194d(a,b),d,c);};}
global.__v1_notifyAll_fa5e194d = function __v1_notifyAll_fa5e194d(a){return function (b,c,d){return ___IntMap_ec0784c7.To.val_list(c,ccont(d,__v27_an_fa5e194d(a,b,d)));};};
__v1_notifyAll_fa5e194d.distant = true;
global.__v1_an_fa5e194d = function __v1_an_fa5e194d(a,b,c){return function (d,e){return ___IntMap_ec0784c7.To.val_list(d,e);};};
__v1_an_fa5e194d.distant = true;
global._____12___fa5e194d = function _____12___fa5e194d(a,b){return return_tc(b,a.name);};
_____12___fa5e194d.distant = true;
global.__v3_an_fa5e194d = function __v3_an_fa5e194d(a,b){return function (c,d){return ___sort_by_ec6de8cf(b)(_____12___fa5e194d,c,d);};};
__v3_an_fa5e194d.distant = true;
function __v29_an_fa5e194d(a,b,c){return function (d){return __v1_notifyAll_fa5e194d(d)(c,a,b);};}
function __v28_an_fa5e194d(a,b,c,d,e){return function (f){var g;return g = {tl:{nil:js_void},hd:{tl:__v15_t_ec6de8cf,hd:{ty:{TyName_ident:"list",TyName_args:{tl:__v10_t_ec6de8cf,hd:{TyRecord_row:{tl:{tl:__v15_t_ec6de8cf,hd:{ty:c,label:"name"}},hd:{ty:b,label:"id"}}}}},label:"users"}}},___instantiate_col_ec6de8cf(g,a,ccont(e,__v29_an_fa5e194d(d,e,{users:f})));};}
function __v30_an_fa5e194d(a,b){return function (c){return b(c,a);};}
global.___broadCastUsers_fa5e194d = function ___broadCastUsers_fa5e194d(a,b,c){return function (d,e){return e = ccont(e,__v28_an_fa5e194d(c,a,b,d,e)),e = ccont(e,__v30_an_fa5e194d(e,__v3_an_fa5e194d(a,b))),__v1_an_fa5e194d(a,b,c)(d,ccont(e,__v30_an_fa5e194d(e,__v2_an_fa5e194d(a,b,c))));};};
___broadCastUsers_fa5e194d.distant = true;
function __v35_an_fa5e194d(a,b,c,d){return function (e){return return_tc(d,{set:{userMap:c,name:a,id:b}});};}
function __v34_an_fa5e194d(a,b,c,d){return function (e){return __v1_notifyAll_fa5e194d(__v16_t_fa5e194d)({message:e},c,ccont(d,__v35_an_fa5e194d(a,b,c,d)));};}
function __v37_an_fa5e194d(a,b,c){return function (d){return return_tc(a,{source:c,text:b,date:d});};}
function __v36_an_fa5e194d(a,b){return function (c){return ___time_now_7e5812a5(ccont(a,__v37_an_fa5e194d(a,c,b)));};}
function __v33_an_fa5e194d(a,b,c,d,e){return function (f){return f = ccont(e,__v34_an_fa5e194d(a,b,d,e)),___flatten_ec6de8cf({tl:{tl:{nil:js_void},hd:" joined the room"},hd:c.name},ccont(f,__v36_an_fa5e194d(f,{system:js_void})));};}
function __v32_an_fa5e194d(a,b,c,d){return function (e){return ___broadCastUsers_fa5e194d(__v60_t_ec6de8cf,__v22_t_ec6de8cf,{TySum_col:{tl:{tl:{tl:{nil:js_void},hd:__v5_t_fa5e194d},hd:__v1_t_fa5e194d},hd:___t_b6501532}})(e,ccont(d,__v33_an_fa5e194d(a,b,c,e,d)));};}
function __v43_an_fa5e194d(a){return function (b){return return_tc(a,{stop:js_void});};}
function __v44_an_fa5e194d(a,b){return function (c){return __v1_send_f2f00d5f(__v37_t_fa5e194d)(c,b,a);};}
function __v42_an_fa5e194d(a,b,c,d){return function (e){return e?(e = ccont(d,__v43_an_fa5e194d(d)),___force_ec6de8cf(___lazy_rooms_fa5e194d,ccont(e,__v44_an_fa5e194d(e,{remove:{name:a,id:b}})))):return_tc(d,{set:{userMap:c,name:a,id:b}});};}
function __v41_an_fa5e194d(a,b,c,d){return function (e){return ___IntMap_ec0784c7.is_empty(c,ccont(d,__v42_an_fa5e194d(a,b,c,d)));};}
function __v40_an_fa5e194d(a,b,c,d){return function (e){return __v1_notifyAll_fa5e194d(__v25_t_fa5e194d)({message:e},c,ccont(d,__v41_an_fa5e194d(a,b,c,d)));};}
function __v45_an_fa5e194d(a,b){return function (c){return ___time_now_7e5812a5(ccont(a,__v37_an_fa5e194d(a,c,b)));};}
function __v39_an_fa5e194d(a,b,c,d,e){return function (f){return f = ccont(e,__v40_an_fa5e194d(a,b,d,e)),___flatten_ec6de8cf({tl:{tl:{nil:js_void},hd:" left the room"},hd:c.name},ccont(f,__v45_an_fa5e194d(f,{system:js_void})));};}
function __v38_an_fa5e194d(a,b,c,d){return function (e){return ___broadCastUsers_fa5e194d(__v60_t_ec6de8cf,__v22_t_ec6de8cf,{TySum_col:{tl:{tl:{tl:{nil:js_void},hd:__v5_t_fa5e194d},hd:__v24_t_fa5e194d},hd:___t_b6501532}})(e,ccont(d,__v39_an_fa5e194d(a,b,c,e,d)));};}
function __v47_an_fa5e194d(a){return function (b){return return_tc(a,{unchanged:js_void});};}
global.___room_channel_handler_fa5e194d = function ___room_channel_handler_fa5e194d(a,b,c){var e,d,f;return d = a.id,e = a.name,a = a.userMap,(f = b.chan)?(b = b.join,___IntMap_ec0784c7.add(b.id,{chan:f,user:b},a,ccont(c,__v32_an_fa5e194d(e,d,b,c)))):(f = b.leave)?___IntMap_ec0784c7.remove(f.id,a,ccont(c,__v38_an_fa5e194d(e,d,f,c))):__v1_notifyAll_fa5e194d(__v16_t_fa5e194d)({message:b.message},a,ccont(c,__v47_an_fa5e194d(c)));};
___room_channel_handler_fa5e194d.distant = true;
function _____1___skip_fa5e194d(a){return {password:___is_some_skip_ec6de8cf(a.password),name:a.name,id:a.id};}
global._____1___fa5e194d = function _____1___fa5e194d(a,b){return return_tc(b,_____1___skip_fa5e194d(a));};
_____1___fa5e194d.distant = true;
global.__v5_an_fa5e194d = function __v5_an_fa5e194d(a,b){return __v32_aux_ec6de8cf(_____1___fa5e194d,a,0,b);};
__v5_an_fa5e194d.distant = true;
global.__v4_an_fa5e194d = function __v4_an_fa5e194d(a,b){return ___IntMap_ec0784c7.To.val_list(a,b);};
__v4_an_fa5e194d.distant = true;
_____12___fa5e194d.distant = true;
global.__v6_an_fa5e194d = function __v6_an_fa5e194d(a,b){return ___sort_by_ec6de8cf(__v22_t_ec6de8cf)(_____12___fa5e194d,a,b);};
__v6_an_fa5e194d.distant = true;
function __v48_an_fa5e194d(a){return function (b){return __v6_an_fa5e194d(b,a);};}
function __v49_an_fa5e194d(a){return function (b){return __v5_an_fa5e194d(b,a);};}
global.___map_to_sorted_list_fa5e194d = function ___map_to_sorted_list_fa5e194d(a,b){return b = ccont(b,__v48_an_fa5e194d(b)),__v4_an_fa5e194d(a,ccont(b,__v49_an_fa5e194d(b)));};
___map_to_sorted_list_fa5e194d.distant = true;
function __v51_an_fa5e194d(a,b,c){return function (d){return __v1_send_f2f00d5f(d)(a,c,b);};}
function __v52_an_fa5e194d(a){return function (b){return return_tc(a,{rooms:b});};}
function __v50_an_fa5e194d(a,b,c){return function (d){return ___instantiate_col_ec6de8cf({tl:{nil:js_void},hd:__v41_t_fa5e194d},a,ccont(c,__v51_an_fa5e194d(b,c,d)));};}
global.___notify_fa5e194d = function ___notify_fa5e194d(a,b){return function (c,d){return c = ccont(d,__v50_an_fa5e194d(a,c,d)),___map_to_sorted_list_fa5e194d(b,ccont(c,__v52_an_fa5e194d(c)));};};
___notify_fa5e194d.distant = true;
function __v53_an_fa5e194d(a,b,c){return function (d){return ___an_iter_ec6de8cf(0,___notify_fa5e194d(a,b),d,c);};}
global.___notifyAll_fa5e194d = function ___notifyAll_fa5e194d(a){return function (b,c,d){return ___IntMap_ec0784c7.To.val_list(c,ccont(d,__v53_an_fa5e194d(a,b,d)));};};
___notifyAll_fa5e194d.distant = true;
function __v61_an_fa5e194d(a,b,c){return function (d){return return_tc(c,{set:{listenerMap:a,roomMap:b}});};}
function __v60_an_fa5e194d(a,b){return function (c){return ___notifyAll_fa5e194d({TySum_col:{nil:js_void}})(c,a,ccont(b,__v61_an_fa5e194d(a,c,b)));};}
function __v59_an_fa5e194d(a,b,c,d,e,f){return function (g){return ___IntMap_ec0784c7.add(e,{room_channel:g,password:c == ""?{none:js_void}:{some:c},name:d,id:e},b,ccont(f,__v60_an_fa5e194d(a,f)));};}
function __v64_an_fa5e194d(a,b){return function (c){return ___notifyAll_fa5e194d({TySum_col:{nil:js_void}})(c,a,ccont(b,__v61_an_fa5e194d(a,c,b)));};}
function __v55_an_fa5e194d(a,b,c){return function (d){return return_tc(c,{set:{listenerMap:b,roomMap:a}});};}
function __v56_an_fa5e194d(a,b){return function (c){return __v1_send_f2f00d5f(__v42_t_fa5e194d)(a,c,b);};}
function __v54_an_fa5e194d(a,b,c){return function (d){return d = ccont(c,__v55_an_fa5e194d(a,d,c)),d = ccont(d,__v56_an_fa5e194d(b,d)),___map_to_sorted_list_fa5e194d(a,ccont(d,__v52_an_fa5e194d(d)));};}
function __v58_an_fa5e194d(a,b){return function (c){return return_tc(b,{set:{listenerMap:c,roomMap:a}});};}
function __v62_an_fa5e194d(a,b,c,d){return function (e){var f,g;return g = ccont(d,__v47_an_fa5e194d(d)),(f = e.some) && (e = f.password.some,e != null)?b == e?__v1_send_f2f00d5f(__v47_t_fa5e194d)(a,{room_channel:f.room_channel,room:{password:{some:e},name:f.name,id:f.id}},g):__v1_send_f2f00d5f(__v58_t_fa5e194d)(a,{error:"Incorrect password"},g):f?__v1_send_f2f00d5f(__v58_t_fa5e194d)(a,{room_channel:f.room_channel,room:{password:{none:js_void},name:f.name,id:f.id}},g):__v1_send_f2f00d5f(__v58_t_fa5e194d)(a,{error:"" + c + " does not exist"},g);};}
global.___rooms_channel_handler_fa5e194d = function ___rooms_channel_handler_fa5e194d(a,b,c){var e,d,f;return d = a.listenerMap,e = a.roomMap,(a = b.client_rooms_chan)?___IntMap_ec0784c7.add(b.listen.id,a,d,ccont(c,__v54_an_fa5e194d(e,a,c))):(a = b.stoplisten)?___IntMap_ec0784c7.remove(a.id,d,ccont(c,__v58_an_fa5e194d(e,c))):(a = b.create,a != null)?(f = b.name,__v2_make_f2f00d5f(__v46_t_fa5e194d)({userMap:___IntMap_ec0784c7.empty,name:f,id:a},___room_channel_handler_fa5e194d,ccont(c,__v59_an_fa5e194d(d,e,b.password,f,a,c)))):(a = b.client_room_chan)?(d = b.get,___IntMap_ec0784c7.get(d,e,ccont(c,__v62_an_fa5e194d(a,b.password,d,c)))):___IntMap_ec0784c7.remove(b.remove.id,e,ccont(c,__v64_an_fa5e194d(d,c)));};
___rooms_channel_handler_fa5e194d.distant = true;
global.__v7_an_fa5e194d = function __v7_an_fa5e194d(a){return __v2_make_f2f00d5f(__v59_t_fa5e194d)({listenerMap:___IntMap_ec0784c7.empty,roomMap:___IntMap_ec0784c7.empty},___rooms_channel_handler_fa5e194d,a);};
__v7_an_fa5e194d.distant = true;
global.___set_lazy_fa5e194d = BslCps_topwait(___Mutable_set_ec6de8cf(___lazy_rooms_fa5e194d,{delayed:__v7_an_fa5e194d},cont(BslCps_topk)));
global.___rooms_fa5e194d = BslCps_topwait(___force_ec6de8cf(___lazy_rooms_fa5e194d,cont(BslCps_topk)));
var ___jsout_fa5e194d = BslCps_topwait(__v1_to_string_f2f00d5f(__v61_t_fa5e194d)("___rooms_fa5e194d",___rooms_fa5e194d,cont(BslCps_topk)));
var __v1_jsout_fa5e194d = BslCps_topwait(__v1_to_string_f2f00d5f(__v16_t_ec6de8cf)("___set_lazy_fa5e194d",___set_lazy_fa5e194d,cont(BslCps_topk)));
var __v2_jsout_fa5e194d = BslCps_topwait(__v1_to_string_f2f00d5f(__v63_t_fa5e194d)("___lazy_rooms_fa5e194d",___lazy_rooms_fa5e194d,cont(BslCps_topk)));
var ___register_js_ast_fa5e194d = BslCps_topwait(___register_js_code_ec6de8cf({ast:[{ast:[{d:js_void,c:[{v:""},{s:["___send_message_fa5e194d","___leave_room_fa5e194d","___join_room_fa5e194d","___get_room_chan_fa5e194d","___create_room_fa5e194d","___unsubscribe_for_rooms_fa5e194d","___subscribe_for_rooms_fa5e194d","__v7_an_fa5e194d","___rooms_channel_handler_fa5e194d","___notifyAll_fa5e194d","___notify_fa5e194d","___map_to_sorted_list_fa5e194d","__v6_an_fa5e194d","_____3___fa5e194d","__v4_an_fa5e194d","__v5_an_fa5e194d","_____1___fa5e194d","___room_channel_handler_fa5e194d","___broadCastUsers_fa5e194d","__v3_an_fa5e194d","_____12___fa5e194d","__v1_an_fa5e194d","__v1_notifyAll_fa5e194d","___an_fa5e194d","__v2_an_fa5e194d","_____10___fa5e194d","___new_author_fa5e194d"]},{v:";\n"}],r:[true],i:{i:"___toplevel_statement_fa5e194d"}},{d:js_void,c:[{v:"var "},{i:"_s6fcda5d7ea"},{v:" = {TyName_args:"},{i:"_s$2728Tyl$2720$2729"},{v:",TyName_ident:"},{tu:"\"message\""},{v:"};\n"}],r:[false],i:{k:"_s6fcda5d7ea"}},{d:js_void,c:[{v:"var "},{i:"_sedd78795a6"},{v:" = {hd:{label:\"message\",ty:"},{i:"_s6fcda5d7ea"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_sedd78795a6"}},{d:js_void,c:[{v:"var "},{i:"_sdb0b013418"},{v:" = {TyName_args:"},{i:"_s$2728Tyl$2720$2729"},{v:",TyName_ident:"},{tu:"\"room_channel\""},{v:"};\n"}],r:[false],i:{k:"_sdb0b013418"}},{d:js_void,c:[{v:"var "},{i:"_s974ed3fe75"},{v:" = {hd:{label:\"room_channel\",ty:"},{i:"_sdb0b013418"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_s974ed3fe75"}},{d:js_void,c:[{v:"var "},{i:"_s2bb8947b06"},{v:" = {TyName_args:"},{i:"_s$2728Tyl$2720$2729"},{v:",TyName_ident:"},{tu:"\"room_client\""},{v:"};\n"}],r:[false],i:{k:"_s2bb8947b06"}},{d:js_void,c:[{v:"var "},{i:"_s8464ceb6bd"},{v:" = {hd:{label:\"room\",ty:"},{i:"_s2bb8947b06"},{v:"},tl:"},{i:"_s974ed3fe75"},{v:"};\n"}],r:[false],i:{k:"_s8464ceb6bd"}},{d:js_void,c:[{v:"var "},{i:"_sf264ed43be"},{v:" = {TyName_args:"},{i:"_s$2728Tyl$2720$2729"},{v:",TyName_ident:"},{tu:"\"source\""},{v:"};\n"}],r:[false],i:{k:"_sf264ed43be"}},{d:js_void,c:[{v:"var "},{i:"_sdebe0cef42"},{v:" = {hd:{label:\"source\",ty:"},{i:"_sf264ed43be"},{v:"},tl:"},{i:"_s77981a94a9"},{v:"};\n"}],r:[false],i:{k:"_sdebe0cef42"}},{d:js_void,c:[{v:"var "},{i:"_s0ac47da03f"},{v:" = {hd:{label:\"date\",ty:"},{i:"_se77001f1a7"},{v:"},tl:"},{i:"_sdebe0cef42"},{v:"};\n"}],r:[false],i:{k:"_s0ac47da03f"}},{d:js_void,c:[{v:"var "},{i:"_sfea40a687a"},{v:" = {TyRecord_row:"},{i:"_s0ac47da03f"},{v:"};\n"}],r:[false],i:{k:"_sfea40a687a"}},{d:js_void,c:[{v:"var "},{i:"_s898ea517ce"},{v:" = {hd:{label:\"message\",ty:"},{i:"_sfea40a687a"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_s898ea517ce"}},{d:js_void,c:[{v:"var "},{i:"_s858ab1f94e"},{v:" = {hd:{label:\"id\",ty:"},{i:"_sI"},{v:"},tl:"},{i:"_s6a2f00b2fa"},{v:"};\n"}],r:[false],i:{k:"_s858ab1f94e"}},{d:js_void,c:[{v:"var "},{i:"_s69a6b78401"},{v:" = {TyRecord_row:"},{i:"_s858ab1f94e"},{v:"};\n"}],r:[false],i:{k:"_s69a6b78401"}},{d:js_void,c:[{v:"var "},{i:"_sf8027df23c"},{v:" = {hd:"},{i:"_s69a6b78401"},{v:",tl:"},{i:"_s$2728Tyl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_sf8027df23c"}},{d:js_void,c:[{v:"var "},{i:"_sa228c10a33"},{v:" = {TyName_args:"},{i:"_sf8027df23c"},{v:",TyName_ident:"},{tu:"\"list\""},{v:"};\n"}],r:[false],i:{k:"_sa228c10a33"}},{d:js_void,c:[{v:"var "},{i:"_sdad64a8945"},{v:" = {hd:{label:\"users\",ty:"},{i:"_sa228c10a33"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_sdad64a8945"}},{d:js_void,c:[{v:"var "},{i:"_s3b167fb350"},{v:" = {TySum_col:{hd:"},{i:"_s9d013c1d18"},{v:",tl:{hd:"},{i:"_s898ea517ce"},{v:",tl:{hd:"},{i:"_s8464ceb6bd"},{v:",tl:{hd:"},{i:"_sdad64a8945"},{v:",tl:{nil:"},{i:"js_void"},{v:"}}}}}};\n"}],r:[false],i:{k:"_s3b167fb350"}},{d:js_void,c:[{v:"var "},{i:"_sa131a4505f"},{v:" = {hd:{label:\"system\",ty:"},{i:"_s$2728R1$2720$2729"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_sa131a4505f"}},{d:js_void,c:[{v:"var "},{i:"_s679987c3ef"},{v:" = {TyName_args:"},{i:"_s$2728Tyl$2720$2729"},{v:",TyName_ident:"},{tu:"\"user\""},{v:"};\n"}],r:[false],i:{k:"_s679987c3ef"}},{d:js_void,c:[{v:"var "},{i:"_s6ed18d354a"},{v:" = {hd:{label:\"user\",ty:"},{i:"_s679987c3ef"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_s6ed18d354a"}},{d:js_void,c:[{v:"var "},{i:"_s2e1bad4fda"},{v:" = {TySum_col:{hd:"},{i:"_sa131a4505f"},{v:",tl:{hd:"},{i:"_s6ed18d354a"},{v:",tl:{nil:"},{i:"js_void"},{v:"}}}};\n"}],r:[false],i:{k:"_s2e1bad4fda"}},{d:js_void,c:[{v:"var "},{i:"_s5b94c6dde6"},{v:" = {hd:{label:\"source\",ty:"},{i:"_s2e1bad4fda"},{v:"},tl:"},{i:"_s77981a94a9"},{v:"};\n"}],r:[false],i:{k:"_s5b94c6dde6"}},{d:js_void,c:[{v:"var "},{i:"_s945fb247a3"},{v:" = {hd:{label:\"date\",ty:"},{i:"_se77001f1a7"},{v:"},tl:"},{i:"_s5b94c6dde6"},{v:"};\n"}],r:[false],i:{k:"_s945fb247a3"}},{d:js_void,c:[{v:"var "},{i:"_s2053b65450"},{v:" = {TyRecord_row:"},{i:"_s945fb247a3"},{v:"};\n"}],r:[false],i:{k:"_s2053b65450"}},{d:js_void,c:[{v:"var "},{i:"_s5c4cff82d1"},{v:" = {hd:{label:\"message\",ty:"},{i:"_s2053b65450"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_s5c4cff82d1"}},{d:js_void,c:[{v:"var "},{i:"_s8e4fd914f9"},{v:" = {TySum_col:{hd:"},{i:"_s9d013c1d18"},{v:",tl:{hd:"},{i:"_s5c4cff82d1"},{v:",tl:{hd:"},{i:"_s8464ceb6bd"},{v:",tl:{hd:"},{i:"_sdad64a8945"},{v:",tl:{nil:"},{i:"js_void"},{v:"}}}}}};\n"}],r:[false],i:{k:"_s8e4fd914f9"}},{d:js_void,c:[{v:"var "},{i:"_s295aa6559a"},{v:" = {hd:{label:\"password\",ty:"},{i:"_sS"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_s295aa6559a"}},{d:js_void,c:[{v:"var "},{i:"_s8c74b162bd"},{v:" = {hd:{label:\"get\",ty:"},{i:"_sI"},{v:"},tl:"},{i:"_s295aa6559a"},{v:"};\n"}],r:[false],i:{k:"_s8c74b162bd"}},{d:js_void,c:[{v:"var "},{i:"_sec2b430e86"},{v:" = {TyName_args:"},{i:"_s$2728Tyl$2720$2729"},{v:",TyName_ident:"},{tu:"\"client_room_channel\""},{v:"};\n"}],r:[false],i:{k:"_sec2b430e86"}},{d:js_void,c:[{v:"var "},{i:"_s3347b68808"},{v:" = {hd:{label:\"client_room_chan\",ty:"},{i:"_sec2b430e86"},{v:"},tl:"},{i:"_s8c74b162bd"},{v:"};\n"}],r:[false],i:{k:"_s3347b68808"}},{d:js_void,c:[{v:"var "},{i:"_s4903d6b618"},{v:" = {hd:{label:\"listen\",ty:"},{i:"_s679987c3ef"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_s4903d6b618"}},{d:js_void,c:[{v:"var "},{i:"_sf62201ae8d"},{v:" = {TyName_args:"},{i:"_s$2728Tyl$2720$2729"},{v:",TyName_ident:"},{tu:"\"client_rooms_channel\""},{v:"};\n"}],r:[false],i:{k:"_sf62201ae8d"}},{d:js_void,c:[{v:"var "},{i:"_s2490a93df9"},{v:" = {hd:{label:\"client_rooms_chan\",ty:"},{i:"_sf62201ae8d"},{v:"},tl:"},{i:"_s4903d6b618"},{v:"};\n"}],r:[false],i:{k:"_s2490a93df9"}},{d:js_void,c:[{v:"var "},{i:"_s2832d83b6d"},{v:" = {hd:{label:\"name\",ty:"},{i:"_sS"},{v:"},tl:"},{i:"_s295aa6559a"},{v:"};\n"}],r:[false],i:{k:"_s2832d83b6d"}},{d:js_void,c:[{v:"var "},{i:"_s15698af138"},{v:" = {hd:{label:\"create\",ty:"},{i:"_sI"},{v:"},tl:"},{i:"_s2832d83b6d"},{v:"};\n"}],r:[false],i:{k:"_s15698af138"}},{d:js_void,c:[{v:"var "},{i:"_s3dfc974e74"},{v:" = {hd:{label:\"remove\",ty:"},{i:"_s679987c3ef"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_s3dfc974e74"}},{d:js_void,c:[{v:"var "},{i:"_sbf565a5d98"},{v:" = {hd:{label:\"stoplisten\",ty:"},{i:"_s679987c3ef"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_sbf565a5d98"}},{d:js_void,c:[{v:"var "},{i:"_s3ed575d40a"},{v:" = {TySum_col:{hd:"},{i:"_s3347b68808"},{v:",tl:{hd:"},{i:"_s2490a93df9"},{v:",tl:{hd:"},{i:"_s15698af138"},{v:",tl:{hd:"},{i:"_s3dfc974e74"},{v:",tl:{hd:"},{i:"_sbf565a5d98"},{v:",tl:{nil:"},{i:"js_void"},{v:"}}}}}}};\n"}],r:[false],i:{k:"_s3ed575d40a"}},{d:js_void,c:[{v:"var "},{i:"_s0eb44cb461"},{v:" = {TyName_args:"},{i:"_s$2728Tyl$2720$2729"},{v:",TyName_ident:"},{tu:"\"room_prot\""},{v:"};\n"}],r:[false],i:{k:"_s0eb44cb461"}},{d:js_void,c:[{v:"var "},{i:"_s922b33d493"},{v:" = {hd:"},{i:"_s0eb44cb461"},{v:",tl:"},{i:"_s$2728Tyl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_s922b33d493"}},{d:js_void,c:[{v:"var "},{i:"_sb914037aff"},{v:" = {TyName_args:"},{i:"_s922b33d493"},{v:",TyName_ident:"},{tu:"\"list\""},{v:"};\n"}],r:[false],i:{k:"_sb914037aff"}},{d:js_void,c:[{v:"var "},{i:"_s0535700010"},{v:" = {hd:{label:\"rooms\",ty:"},{i:"_sb914037aff"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_s0535700010"}},{d:js_void,c:[{v:"var "},{i:"_s3c46d06403"},{v:" = {TyRecord_row:"},{i:"_s0535700010"},{v:"};\n"}],r:[false],i:{k:"_s3c46d06403"}},{d:js_void,c:[{v:"var "},{i:"_s27e4567144"},{v:" = {hd:{label:\"join\",ty:"},{i:"_s679987c3ef"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_s27e4567144"}},{d:js_void,c:[{v:"var "},{i:"_s13c08e8895"},{v:" = {hd:{label:\"chan\",ty:"},{i:"_sec2b430e86"},{v:"},tl:"},{i:"_s27e4567144"},{v:"};\n"}],r:[false],i:{k:"_s13c08e8895"}},{d:js_void,c:[{v:"var "},{i:"_sb04d0dbf63"},{v:" = {hd:{label:\"leave\",ty:"},{i:"_s679987c3ef"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_sb04d0dbf63"}},{d:js_void,c:[{v:"var "},{i:"_s3aab2e2e77"},{v:" = {TySum_col:{hd:"},{i:"_s13c08e8895"},{v:",tl:{hd:"},{i:"_sb04d0dbf63"},{v:",tl:{hd:"},{i:"_sedd78795a6"},{v:",tl:{nil:"},{i:"js_void"},{v:"}}}}};\n"}],r:[false],i:{k:"_s3aab2e2e77"}},{d:js_void,c:[{v:"var "},{i:"_s67369aab06"},{v:" = {TySum_col:{hd:"},{i:"_s9d013c1d18"},{v:",tl:{hd:"},{i:"_sedd78795a6"},{v:",tl:{hd:"},{i:"_s8464ceb6bd"},{v:",tl:{hd:"},{i:"_sdad64a8945"},{v:",tl:{nil:"},{i:"js_void"},{v:"}}}}}};\n"}],r:[false],i:{k:"_s67369aab06"}},{d:js_void,c:[{v:"var "},{i:"_sfe823fcf28"},{v:" = {hd:"},{i:"_s3aab2e2e77"},{v:",tl:"},{i:"_s$2728Tyl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_sfe823fcf28"}},{d:js_void,c:[{v:"var "},{i:"_s9df754f7cf"},{v:" = {TyName_args:"},{i:"_sfe823fcf28"},{v:",TyName_ident:"},{tu:"\"channel\""},{v:"};\n"}],r:[false],i:{k:"_s9df754f7cf"}},{d:js_void,c:[{v:"var "},{i:"_s5fa1a4191c"},{v:" = {hd:{label:\"room_channel\",ty:"},{i:"_s9df754f7cf"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_s5fa1a4191c"}},{d:js_void,c:[{v:"var "},{i:"_s1c30bdea56"},{v:" = {hd:{label:\"some\",ty:"},{i:"_sS"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_s1c30bdea56"}},{d:js_void,c:[{v:"var "},{i:"_scda927f577"},{v:" = {TySum_col:{hd:"},{i:"_sb69610a8f5"},{v:",tl:{hd:"},{i:"_s1c30bdea56"},{v:",tl:{nil:"},{i:"js_void"},{v:"}}}};\n"}],r:[false],i:{k:"_scda927f577"}},{d:js_void,c:[{v:"var "},{i:"_s0c335ad499"},{v:" = {hd:{label:\"password\",ty:"},{i:"_scda927f577"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_s0c335ad499"}},{d:js_void,c:[{v:"var "},{i:"_sd22d982f82"},{v:" = {hd:{label:\"name\",ty:"},{i:"_sS"},{v:"},tl:"},{i:"_s0c335ad499"},{v:"};\n"}],r:[false],i:{k:"_sd22d982f82"}},{d:js_void,c:[{v:"var "},{i:"_s644779cf83"},{v:" = {hd:{label:\"id\",ty:"},{i:"_sI"},{v:"},tl:"},{i:"_sd22d982f82"},{v:"};\n"}],r:[false],i:{k:"_s644779cf83"}},{d:js_void,c:[{v:"var "},{i:"_sebc295f811"},{v:" = {TyRecord_row:"},{i:"_s644779cf83"},{v:"};\n"}],r:[false],i:{k:"_sebc295f811"}},{d:js_void,c:[{v:"var "},{i:"_sd0e3070672"},{v:" = {hd:{label:\"room\",ty:"},{i:"_sebc295f811"},{v:"},tl:"},{i:"_s5fa1a4191c"},{v:"};\n"}],r:[false],i:{k:"_sd0e3070672"}},{d:js_void,c:[{v:"var "},{i:"_sd7ecf359bc"},{v:" = {TySum_col:{hd:"},{i:"_s9d013c1d18"},{v:",tl:{hd:"},{i:"_sedd78795a6"},{v:",tl:{hd:"},{i:"_sd0e3070672"},{v:",tl:{hd:"},{i:"_sdad64a8945"},{v:",tl:{nil:"},{i:"js_void"},{v:"}}}}}};\n"}],r:[false],i:{k:"_sd7ecf359bc"}},{d:js_void,c:[{v:"var "},{i:"_sef95e9cf23"},{v:" = {TyName_args:"},{i:"_s$2728Tyl$2720$2729"},{v:",TyName_ident:"},{tu:"\"rooms_msg\""},{v:"};\n"}],r:[false],i:{k:"_sef95e9cf23"}},{d:js_void,c:[{v:"var "},{i:"_s5781740864"},{v:" = {quantifier:"},{i:"_se1e0a08bb9"},{v:",body:"},{i:"_sfea40a687a"},{v:"};\n"}],r:[false],i:{k:"_s5781740864"}},{d:js_void,c:[{v:"var "},{i:"_sd86e01a1c1"},{v:" = {quantifier:"},{i:"_se1e0a08bb9"},{v:",body:"},{i:"_s2e1bad4fda"},{v:"};\n"}],r:[false],i:{k:"_sd86e01a1c1"}},{d:js_void,c:[{v:"var "},{i:"_s0262ce0999"},{v:" = {quantifier:"},{i:"_se1e0a08bb9"},{v:",body:"},{i:"_s3aab2e2e77"},{v:"};\n"}],r:[false],i:{k:"_s0262ce0999"}},{d:js_void,c:[{v:"var "},{i:"_s63b6729c81"},{v:" = {TyName_args:"},{i:"_s$2728Tyl$2720$2729"},{v:",TyName_ident:"},{tu:"\"room_msg\""},{v:"};\n"}],r:[false],i:{k:"_s63b6729c81"}},{d:js_void,c:[{v:"var "},{i:"_s0b0755c314"},{v:" = {hd:"},{i:"_s63b6729c81"},{v:",tl:"},{i:"_s$2728Tyl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_s0b0755c314"}},{d:js_void,c:[{v:"var "},{i:"_sa9f5411928"},{v:" = {TyName_args:"},{i:"_s0b0755c314"},{v:",TyName_ident:"},{tu:"\"channel\""},{v:"};\n"}],r:[false],i:{k:"_sa9f5411928"}},{d:js_void,c:[{v:"var "},{i:"_sf775b80fcf"},{v:" = {quantifier:"},{i:"_se1e0a08bb9"},{v:",body:"},{i:"_sa9f5411928"},{v:"};\n"}],r:[false],i:{k:"_sf775b80fcf"}},{d:js_void,c:[{v:"var "},{i:"_s49d308f7fe"},{v:" = {hd:{label:\"password\",ty:"},{i:"_s4871cc79a8"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_s49d308f7fe"}},{d:js_void,c:[{v:"var "},{i:"_s4db23803ed"},{v:" = {hd:{label:\"name\",ty:"},{i:"_sS"},{v:"},tl:"},{i:"_s49d308f7fe"},{v:"};\n"}],r:[false],i:{k:"_s4db23803ed"}},{d:js_void,c:[{v:"var "},{i:"_s0df1b0145b"},{v:" = {hd:{label:\"id\",ty:"},{i:"_sI"},{v:"},tl:"},{i:"_s4db23803ed"},{v:"};\n"}],r:[false],i:{k:"_s0df1b0145b"}},{d:js_void,c:[{v:"var "},{i:"_s75e2045e73"},{v:" = {TyRecord_row:"},{i:"_s0df1b0145b"},{v:"};\n"}],r:[false],i:{k:"_s75e2045e73"}},{d:js_void,c:[{v:"var "},{i:"_s71f148ce57"},{v:" = {quantifier:"},{i:"_se1e0a08bb9"},{v:",body:"},{i:"_s75e2045e73"},{v:"};\n"}],r:[false],i:{k:"_s71f148ce57"}},{d:js_void,c:[{v:"var "},{i:"_s6523144776"},{v:" = {hd:{label:\"password\",ty:"},{i:"_s$2728N$2720bool$2720$2729"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_s6523144776"}},{d:js_void,c:[{v:"var "},{i:"_s2e60861514"},{v:" = {hd:{label:\"name\",ty:"},{i:"_sS"},{v:"},tl:"},{i:"_s6523144776"},{v:"};\n"}],r:[false],i:{k:"_s2e60861514"}},{d:js_void,c:[{v:"var "},{i:"_s3429b1d1a1"},{v:" = {hd:{label:\"id\",ty:"},{i:"_sI"},{v:"},tl:"},{i:"_s2e60861514"},{v:"};\n"}],r:[false],i:{k:"_s3429b1d1a1"}},{d:js_void,c:[{v:"var "},{i:"_sef0158d56e"},{v:" = {TyRecord_row:"},{i:"_s3429b1d1a1"},{v:"};\n"}],r:[false],i:{k:"_sef0158d56e"}},{d:js_void,c:[{v:"var "},{i:"_s6074a4708c"},{v:" = {quantifier:"},{i:"_se1e0a08bb9"},{v:",body:"},{i:"_sef0158d56e"},{v:"};\n"}],r:[false],i:{k:"_s6074a4708c"}},{d:js_void,c:[{v:"var "},{i:"_sbf8968a547"},{v:" = {quantifier:"},{i:"_se1e0a08bb9"},{v:",body:"},{i:"_s3ed575d40a"},{v:"};\n"}],r:[false],i:{k:"_sbf8968a547"}},{d:js_void,c:[{v:"var "},{i:"_sa508603104"},{v:" = {hd:"},{i:"_sef95e9cf23"},{v:",tl:"},{i:"_s$2728Tyl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_sa508603104"}},{d:js_void,c:[{v:"var "},{i:"_s4a56943dd6"},{v:" = {TyName_args:"},{i:"_sa508603104"},{v:",TyName_ident:"},{tu:"\"channel\""},{v:"};\n"}],r:[false],i:{k:"_s4a56943dd6"}},{d:js_void,c:[{v:"var "},{i:"_sab7ad43173"},{v:" = {quantifier:"},{i:"_se1e0a08bb9"},{v:",body:"},{i:"_s4a56943dd6"},{v:"};\n"}],r:[false],i:{k:"_sab7ad43173"}},{d:js_void,c:[{v:"var "},{i:"_sfa5dc7c65c"},{v:" = {hd:"},{i:"_s679987c3ef"},{v:",tl:"},{i:"_s$2728Tyl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_sfa5dc7c65c"}},{d:js_void,c:[{v:"var "},{i:"_s18bfaaed03"},{v:" = {TyName_args:"},{i:"_sfa5dc7c65c"},{v:",TyName_ident:"},{tu:"\"list\""},{v:"};\n"}],r:[false],i:{k:"_s18bfaaed03"}},{d:js_void,c:[{v:"var "},{i:"_sa79553febc"},{v:" = {hd:{label:\"users\",ty:"},{i:"_s18bfaaed03"},{v:"},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_sa79553febc"}},{d:js_void,c:[{v:"var "},{i:"_s0cb04e92d4"},{v:" = {TySum_col:{hd:"},{i:"_s9d013c1d18"},{v:",tl:{hd:"},{i:"_sedd78795a6"},{v:",tl:{hd:"},{i:"_s8464ceb6bd"},{v:",tl:{hd:"},{i:"_sa79553febc"},{v:",tl:{nil:"},{i:"js_void"},{v:"}}}}}};\n"}],r:[false],i:{k:"_s0cb04e92d4"}},{d:js_void,c:[{v:"var "},{i:"_sd16b8d0fe2"},{v:" = {quantifier:"},{i:"_se1e0a08bb9"},{v:",body:"},{i:"_s0cb04e92d4"},{v:"};\n"}],r:[false],i:{k:"_sd16b8d0fe2"}},{d:js_void,c:[{v:"var "},{i:"_s71bbf03c4e"},{v:" = {TyName_args:"},{i:"_s$2728Tyl$2720$2729"},{v:",TyName_ident:"},{tu:"\"client_room_msg\""},{v:"};\n"}],r:[false],i:{k:"_s71bbf03c4e"}},{d:js_void,c:[{v:"var "},{i:"_s04354c8feb"},{v:" = {hd:"},{i:"_s71bbf03c4e"},{v:",tl:"},{i:"_s$2728Tyl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_s04354c8feb"}},{d:js_void,c:[{v:"var "},{i:"_s5e3202334a"},{v:" = {TyName_args:"},{i:"_s04354c8feb"},{v:",TyName_ident:"},{tu:"\"channel\""},{v:"};\n"}],r:[false],i:{k:"_s5e3202334a"}},{d:js_void,c:[{v:"var "},{i:"_s19c1c1180a"},{v:" = {quantifier:"},{i:"_se1e0a08bb9"},{v:",body:"},{i:"_s5e3202334a"},{v:"};\n"}],r:[false],i:{k:"_s19c1c1180a"}},{d:js_void,c:[{v:"var "},{i:"_s482e661a10"},{v:" = {quantifier:"},{i:"_se1e0a08bb9"},{v:",body:"},{i:"_s3c46d06403"},{v:"};\n"}],r:[false],i:{k:"_s482e661a10"}},{d:js_void,c:[{v:"var "},{i:"_s0636bca863"},{v:" = {TyName_args:"},{i:"_s$2728Tyl$2720$2729"},{v:",TyName_ident:"},{tu:"\"client_rooms_msg\""},{v:"};\n"}],r:[false],i:{k:"_s0636bca863"}},{d:js_void,c:[{v:"var "},{i:"_sc707b7b5b0"},{v:" = {hd:"},{i:"_s0636bca863"},{v:",tl:"},{i:"_s$2728Tyl$2720$2729"},{v:"};\n"}],r:[false],i:{k:"_sc707b7b5b0"}},{d:js_void,c:[{v:"var "},{i:"_se2bcabe354"},{v:" = {TyName_args:"},{i:"_sc707b7b5b0"},{v:",TyName_ident:"},{tu:"\"channel\""},{v:"};\n"}],r:[false],i:{k:"_se2bcabe354"}},{d:js_void,c:[{v:"var "},{i:"_s239a55c467"},{v:" = {quantifier:"},{i:"_se1e0a08bb9"},{v:",body:"},{i:"_se2bcabe354"},{v:"};\n"}],r:[false],i:{k:"_s239a55c467"}},{d:js_void,c:[{v:"var "},{i:"_se3de8ed9a2"},{v:" = {hd:{label:\"chan\",ty:"},{i:"_sec2b430e86"},{v:"},tl:"},{i:"_s6ed18d354a"},{v:"};\n"}],r:[false],i:{k:"_se3de8ed9a2"}},{d:js_void,c:[{v:"var "},{i:"_s00848c0588"},{v:" = {TyRecord_row:"},{i:"_se3de8ed9a2"},{v:"};\n"}],r:[false],i:{k:"_s00848c0588"}},{d:js_void,c:[{v:"var "},{i:"_sc0c1183916"},{v:" = {quantifier:"},{i:"_se1e0a08bb9"},{v:",body:"},{i:"_s00848c0588"},{v:"};\n"}],r:[false],i:{k:"_sc0c1183916"}},{d:js_void,c:[{v:"var "},{i:"_s9cc93d45f1"},{v:" = {quantifier:"},{i:"_se1e0a08bb9"},{v:",body:"},{i:"_s69a6b78401"},{v:"};\n"}],r:[false],i:{k:"_s9cc93d45f1"}},{d:{t:"\"message\""},c:[{v:"var "},{i:"_stypedef_message"},{v:" = "},{i:"BslValue_Tsc_add"},{v:"("},{td:"\"message\""},{v:","},{i:"_s5781740864"},{v:");\n"}],r:[false],i:{k:"_stypedef_message"}},{d:{t:"\"source\""},c:[{v:"var "},{i:"_stypedef_source"},{v:" = "},{i:"BslValue_Tsc_add"},{v:"("},{td:"\"source\""},{v:","},{i:"_sd86e01a1c1"},{v:");\n"}],r:[false],i:{k:"_stypedef_source"}},{d:{t:"\"room_msg\""},c:[{v:"var "},{i:"_stypedef_room_msg"},{v:" = "},{i:"BslValue_Tsc_add"},{v:"("},{td:"\"room_msg\""},{v:","},{i:"_s0262ce0999"},{v:");\n"}],r:[false],i:{k:"_stypedef_room_msg"}},{d:{t:"\"room_channel\""},c:[{v:"var "},{i:"_stypedef_room_channel"},{v:" = "},{i:"BslValue_Tsc_add"},{v:"("},{td:"\"room_channel\""},{v:","},{i:"_sf775b80fcf"},{v:");\n"}],r:[false],i:{k:"_stypedef_room_channel"}},{d:{t:"\"room_client\""},c:[{v:"var "},{i:"_stypedef_room_client"},{v:" = "},{i:"BslValue_Tsc_add"},{v:"("},{td:"\"room_client\""},{v:","},{i:"_s71f148ce57"},{v:");\n"}],r:[false],i:{k:"_stypedef_room_client"}},{d:{t:"\"room_prot\""},c:[{v:"var "},{i:"_stypedef_room_prot"},{v:" = "},{i:"BslValue_Tsc_add"},{v:"("},{td:"\"room_prot\""},{v:","},{i:"_s6074a4708c"},{v:");\n"}],r:[false],i:{k:"_stypedef_room_prot"}},{d:{t:"\"rooms_msg\""},c:[{v:"var "},{i:"_stypedef_rooms_msg"},{v:" = "},{i:"BslValue_Tsc_add"},{v:"("},{td:"\"rooms_msg\""},{v:","},{i:"_sbf8968a547"},{v:");\n"}],r:[false],i:{k:"_stypedef_rooms_msg"}},{d:{t:"\"rooms_channel\""},c:[{v:"var "},{i:"_stypedef_rooms_channel"},{v:" = "},{i:"BslValue_Tsc_add"},{v:"("},{td:"\"rooms_channel\""},{v:","},{i:"_sab7ad43173"},{v:");\n"}],r:[false],i:{k:"_stypedef_rooms_channel"}},{d:{t:"\"client_room_msg\""},c:[{v:"var "},{i:"_stypedef_client_room_msg"},{v:" = "},{i:"BslValue_Tsc_add"},{v:"("},{td:"\"client_room_msg\""},{v:","},{i:"_sd16b8d0fe2"},{v:");\n"}],r:[false],i:{k:"_stypedef_client_room_msg"}},{d:{t:"\"client_room_channel\""},c:[{v:"var "},{i:"_stypedef_client_room_channel"},{v:" = "},{i:"BslValue_Tsc_add"},{v:"("},{td:"\"client_room_channel\""},{v:","},{i:"_s19c1c1180a"},{v:");\n"}],r:[false],i:{k:"_stypedef_client_room_channel"}},{d:{t:"\"client_rooms_msg\""},c:[{v:"var "},{i:"_stypedef_client_rooms_msg"},{v:" = "},{i:"BslValue_Tsc_add"},{v:"("},{td:"\"client_rooms_msg\""},{v:","},{i:"_s482e661a10"},{v:");\n"}],r:[false],i:{k:"_stypedef_client_rooms_msg"}},{d:{t:"\"client_rooms_channel\""},c:[{v:"var "},{i:"_stypedef_client_rooms_channel"},{v:" = "},{i:"BslValue_Tsc_add"},{v:"("},{td:"\"client_rooms_channel\""},{v:","},{i:"_s239a55c467"},{v:");\n"}],r:[false],i:{k:"_stypedef_client_rooms_channel"}},{d:{t:"\"user_and_chan\""},c:[{v:"var "},{i:"_stypedef_user_and_chan"},{v:" = "},{i:"BslValue_Tsc_add"},{v:"("},{td:"\"user_and_chan\""},{v:","},{i:"_sc0c1183916"},{v:");\n"}],r:[false],i:{k:"_stypedef_user_and_chan"}},{d:{t:"\"user\""},c:[{v:"var "},{i:"_stypedef_user"},{v:" = "},{i:"BslValue_Tsc_add"},{v:"("},{td:"\"user\""},{v:","},{i:"_s9cc93d45f1"},{v:");\n"}],r:[false],i:{k:"_stypedef_user"}},{d:js_void,c:[{v:"function "},{i:"___new_author_fa5e194d"},{v:"(){return "},{i:"BslNumber_Random_string"},{v:"(8);}\n"}],r:[false],i:{i:"___new_author_fa5e194d"}},{d:js_void,c:[{v:"var "},{i:"___lazy_rooms_fa5e194d"},{v:" = ("},{v:__v2_jsout_fa5e194d},{v:");\n"}],r:[false],i:{i:"___lazy_rooms_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"_____10___fa5e194d"},{v:"(a){return a = a.user,{id:a.id,name:a.name};}\n"}],r:[false],i:{i:"_____10___fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"__v2_an_fa5e194d"},{v:"(a,b,c){return function (d){return "},{i:"__v32_aux_ec6de8cf"},{v:"("},{i:"_____10___fa5e194d"},{v:",d,0);};}\n"}],r:[false],i:{i:"__v2_an_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"___an_fa5e194d"},{v:"(a,b){return function (c){return "},{i:"__v1_send_f2f00d5f"},{v:"(a)(c.chan,b);};}\n"}],r:[false],i:{i:"___an_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"__v1_notifyAll_fa5e194d"},{v:"(a){return function (b,c){return "},{i:"__v2_iter_ec6de8cf"},{v:"("},{i:"___an_fa5e194d"},{v:"(a,b),"},{i:"___IntMap_ec0784c7"},{v:".To.val_list(c));};}\n"}],r:[false],i:{i:"__v1_notifyAll_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"__v1_an_fa5e194d"},{v:"(a,b,c){return function (d){return "},{i:"___IntMap_ec0784c7"},{v:".To.val_list(d);};}\n"}],r:[false],i:{i:"__v1_an_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"_____12___fa5e194d"},{v:"(a){return a.name;}\n"}],r:[false],i:{i:"_____12___fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"__v3_an_fa5e194d"},{v:"(a,b){return function (c){return "},{i:"___sort_by_ec6de8cf"},{v:"(b)("},{i:"_____12___fa5e194d"},{v:",c);};}\n"}],r:[false],i:{i:"__v3_an_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"___broadCastUsers_fa5e194d"},{v:"(a,b,c){return function (d){var e;return e = "},{i:"__v3_an_fa5e194d"},{v:"(a,b)("},{i:"__v2_an_fa5e194d"},{v:"(a,b,c)("},{i:"__v1_an_fa5e194d"},{v:"(a,b,c)(d))),"},{i:"__v1_notifyAll_fa5e194d"},{v:"("},{i:"___instantiate_col_ec6de8cf"},{v:"({hd:{hd:{label:\"users\",ty:{TyName_args:{hd:{TyRecord_row:{hd:{label:\"id\",ty:a},tl:{hd:{label:\"name\",ty:b},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"}}},tl:"},{i:"_s$2728Tyl$2720$2729"},{v:"},TyName_ident:"},{tu:"\"list\""},{v:"}},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"},tl:{nil:"},{i:"js_void"},{v:"}},c))({users:e},d);};}\n"}],r:[false],i:{i:"___broadCastUsers_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"___room_channel_handler_fa5e194d"},{v:"(a,b){var d,c,e;return c = a.id,d = a.name,a = a.userMap,(e = b.chan)?(b = b.join,a = "},{i:"___IntMap_ec0784c7"},{v:".add(b.id,{user:b,chan:e},a),"},{i:"___broadCastUsers_fa5e194d"},{v:"("},{i:"_sI"},{v:","},{i:"_sS"},{v:",{TySum_col:{hd:"},{i:"_s9d013c1d18"},{v:",tl:{hd:"},{i:"_sedd78795a6"},{v:",tl:{hd:"},{i:"_s8464ceb6bd"},{v:",tl:{nil:"},{i:"js_void"},{v:"}}}}})(a),"},{i:"__v1_notifyAll_fa5e194d"},{v:"("},{i:"_s3b167fb350"},{v:")({message:{source:{system:"},{i:"js_void"},{v:"},text:"},{i:"___flatten_ec6de8cf"},{v:"({hd:b.name,tl:{hd:\" joined the room\",tl:{nil:"},{i:"js_void"},{v:"}}}),date:"},{i:"BslTime_now"},{v:"()}},a),{set:{id:c,name:d,userMap:a}}):(e = b.leave)?(a = "},{i:"___IntMap_ec0784c7"},{v:".remove(e.id,a),"},{i:"___broadCastUsers_fa5e194d"},{v:"("},{i:"_sI"},{v:","},{i:"_sS"},{v:",{TySum_col:{hd:"},{i:"_s9d013c1d18"},{v:",tl:{hd:"},{i:"_s5c4cff82d1"},{v:",tl:{hd:"},{i:"_s8464ceb6bd"},{v:",tl:{nil:"},{i:"js_void"},{v:"}}}}})(a),"},{i:"__v1_notifyAll_fa5e194d"},{v:"("},{i:"_s8e4fd914f9"},{v:")({message:{source:{system:"},{i:"js_void"},{v:"},text:"},{i:"___flatten_ec6de8cf"},{v:"({hd:e.name,tl:{hd:\" left the room\",tl:{nil:"},{i:"js_void"},{v:"}}}),date:"},{i:"BslTime_now"},{v:"()}},a),"},{i:"___IntMap_ec0784c7"},{v:".is_empty(a)?("},{i:"__v1_send_f2f00d5f"},{v:"("},{i:"_s3ed575d40a"},{v:")("},{i:"___force_ec6de8cf"},{v:"("},{i:"___lazy_rooms_fa5e194d"},{v:"),{remove:{id:c,name:d}}),{stop:"},{i:"js_void"},{v:"}):{set:{id:c,name:d,userMap:a}}):("},{i:"__v1_notifyAll_fa5e194d"},{v:"("},{i:"_s3b167fb350"},{v:")({message:b.message},a),{unchanged:"},{i:"js_void"},{v:"});}\n"}],r:[false],i:{i:"___room_channel_handler_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"_____1___fa5e194d"},{v:"(a){return {id:a.id,name:a.name,password:"},{i:"___is_some_ec6de8cf"},{v:"(a.password)};}\n"}],r:[false],i:{i:"_____1___fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"__v5_an_fa5e194d"},{v:"(a){return "},{i:"__v32_aux_ec6de8cf"},{v:"("},{i:"_____1___fa5e194d"},{v:",a,0);}\n"}],r:[false],i:{i:"__v5_an_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"__v4_an_fa5e194d"},{v:"(a){return "},{i:"___IntMap_ec0784c7"},{v:".To.val_list(a);}\n"}],r:[false],i:{i:"__v4_an_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"__v6_an_fa5e194d"},{v:"(a){return "},{i:"___sort_by_ec6de8cf"},{v:"("},{i:"_sS"},{v:")("},{i:"_____12___fa5e194d"},{v:",a);}\n"}],r:[false],i:{i:"__v6_an_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"___map_to_sorted_list_fa5e194d"},{v:"(a){return "},{i:"__v6_an_fa5e194d"},{v:"("},{i:"__v5_an_fa5e194d"},{v:"("},{i:"__v4_an_fa5e194d"},{v:"(a)));}\n"}],r:[false],i:{i:"___map_to_sorted_list_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"___notify_fa5e194d"},{v:"(a,b){return function (c){return "},{i:"__v1_send_f2f00d5f"},{v:"("},{i:"___instantiate_col_ec6de8cf"},{v:"({hd:"},{i:"_s0535700010"},{v:",tl:{nil:"},{i:"js_void"},{v:"}},a))(c,{rooms:"},{i:"___map_to_sorted_list_fa5e194d"},{v:"(b)});};}\n"}],r:[false],i:{i:"___notify_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"___notifyAll_fa5e194d"},{v:"(a){return function (b,c){return "},{i:"__v2_iter_ec6de8cf"},{v:"("},{i:"___notify_fa5e194d"},{v:"(a,b),"},{i:"___IntMap_ec0784c7"},{v:".To.val_list(c));};}\n"}],r:[false],i:{i:"___notifyAll_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"___rooms_channel_handler_fa5e194d"},{v:"(a,b){var d,c,e;return c = a.listenerMap,d = a.roomMap,(a = b.client_rooms_chan)?(c = "},{i:"___IntMap_ec0784c7"},{v:".add(b.listen.id,a,c),"},{i:"__v1_send_f2f00d5f"},{v:"("},{i:"_s3c46d06403"},{v:")(a,{rooms:"},{i:"___map_to_sorted_list_fa5e194d"},{v:"(d)}),{set:{roomMap:d,listenerMap:c}}):(a = b.stoplisten)?{set:{roomMap:d,listenerMap:"},{i:"___IntMap_ec0784c7"},{v:".remove(a.id,c)}}:(e = b.create,e != null)?(a = b.name,b = b.password,a = "},{i:"___IntMap_ec0784c7"},{v:".add(e,{id:e,name:a,password:b == \"\"?{none:"},{i:"js_void"},{v:"}:{some:b},room_channel:"},{i:"__v2_make_f2f00d5f"},{v:"("},{i:"_s3aab2e2e77"},{v:")({id:e,name:a,userMap:"},{i:"___IntMap_ec0784c7"},{v:".empty},"},{i:"___room_channel_handler_fa5e194d"},{v:")},d),"},{i:"___notifyAll_fa5e194d"},{v:"({TySum_col:{nil:"},{i:"js_void"},{v:"}})(a,c),{set:{roomMap:a,listenerMap:c}}):(e = b.client_room_chan)?(c = b.get,(a = "},{i:"___IntMap_ec0784c7"},{v:".get(c,d).some) && (d = a.password.some,d != null)?b.password == d?"},{i:"__v1_send_f2f00d5f"},{v:"("},{i:"_s67369aab06"},{v:")(e,{room:{id:a.id,name:a.name,password:{some:d}},room_channel:a.room_channel}):"},{i:"__v1_send_f2f00d5f"},{v:"("},{i:"_sd7ecf359bc"},{v:")(e,{error:\"Incorrect password\"}):a?"},{i:"__v1_send_f2f00d5f"},{v:"("},{i:"_sd7ecf359bc"},{v:")(e,{room:{id:a.id,name:a.name,password:{none:"},{i:"js_void"},{v:"}},room_channel:a.room_channel}):"},{i:"__v1_send_f2f00d5f"},{v:"("},{i:"_sd7ecf359bc"},{v:")(e,{error:\"\" + c + \" does not exist\"}),{unchanged:"},{i:"js_void"},{v:"}):(a = "},{i:"___IntMap_ec0784c7"},{v:".remove(b.remove.id,d),"},{i:"___notifyAll_fa5e194d"},{v:"({TySum_col:{nil:"},{i:"js_void"},{v:"}})(a,c),{set:{roomMap:a,listenerMap:c}});}\n"}],r:[false],i:{i:"___rooms_channel_handler_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"__v7_an_fa5e194d"},{v:"(){return "},{i:"__v2_make_f2f00d5f"},{v:"("},{i:"_sef95e9cf23"},{v:")({roomMap:"},{i:"___IntMap_ec0784c7"},{v:".empty,listenerMap:"},{i:"___IntMap_ec0784c7"},{v:".empty},"},{i:"___rooms_channel_handler_fa5e194d"},{v:");}\n"}],r:[false],i:{i:"__v7_an_fa5e194d"}},{d:js_void,c:[{v:"var "},{i:"___set_lazy_fa5e194d"},{v:" = ("},{v:__v1_jsout_fa5e194d},{v:");\n"}],r:[false],i:{i:"___set_lazy_fa5e194d"}},{d:js_void,c:[{v:"var "},{i:"___rooms_fa5e194d"},{v:" = ("},{v:___jsout_fa5e194d},{v:");\n"}],r:[false],i:{i:"___rooms_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"___subscribe_for_rooms_fa5e194d"},{v:"(a,b){return "},{i:"__v1_send_f2f00d5f"},{v:"("},{i:"_s3ed575d40a"},{v:")("},{i:"___rooms_fa5e194d"},{v:",{listen:a,client_rooms_chan:b});}\n"}],r:[false],i:{i:"___subscribe_for_rooms_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"___unsubscribe_for_rooms_fa5e194d"},{v:"(a){return "},{i:"__v1_send_f2f00d5f"},{v:"("},{i:"_s3ed575d40a"},{v:")("},{i:"___rooms_fa5e194d"},{v:",{stoplisten:a});}\n"}],r:[false],i:{i:"___unsubscribe_for_rooms_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"___create_room_fa5e194d"},{v:"(a){return "},{i:"__v1_send_f2f00d5f"},{v:"("},{i:"_s3ed575d40a"},{v:")("},{i:"___rooms_fa5e194d"},{v:",{create:a.id,name:a.name,password:a.password});}\n"}],r:[false],i:{i:"___create_room_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"___get_room_chan_fa5e194d"},{v:"(a,b,c){return "},{i:"__v1_send_f2f00d5f"},{v:"("},{i:"_s3ed575d40a"},{v:")("},{i:"___rooms_fa5e194d"},{v:",{get:a,password:b,client_room_chan:c});}\n"}],r:[false],i:{i:"___get_room_chan_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"___join_room_fa5e194d"},{v:"(a,b,c){return function (d,e,f){return "},{i:"__v1_send_f2f00d5f"},{v:"("},{i:"___instantiate_col_ec6de8cf"},{v:"({hd:{hd:{label:\"chan\",ty:b},tl:{hd:{label:\"join\",ty:a},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"}},tl:{nil:"},{i:"js_void"},{v:"}},c))(d,{join:e,chan:f});};}\n"}],r:[false],i:{i:"___join_room_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"___leave_room_fa5e194d"},{v:"(a,b){return function (c,d){return "},{i:"__v1_send_f2f00d5f"},{v:"("},{i:"___instantiate_col_ec6de8cf"},{v:"({hd:{hd:{label:\"leave\",ty:a},tl:"},{i:"_s$2728Styl$2720$2729"},{v:"},tl:{nil:"},{i:"js_void"},{v:"}},b))(c,{leave:d});};}\n"}],r:[false],i:{i:"___leave_room_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"___send_message_fa5e194d"},{v:"(a){return function (b,c){return "},{i:"__v1_send_f2f00d5f"},{v:"(a)(b,c);};}\n"}],r:[false],i:{i:"___send_message_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"__v24_an_fa5e194d"},{v:"(a,b,c){return "},{i:"___join_room_fa5e194d"},{v:"(a,b,c);}\n"}],r:[false],i:{i:"__v24_an_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"__v25_an_fa5e194d"},{v:"(a,b){return "},{i:"___leave_room_fa5e194d"},{v:"(a,b);}\n"}],r:[false],i:{i:"__v25_an_fa5e194d"}},{d:js_void,c:[{v:"function "},{i:"__v26_an_fa5e194d"},{v:"(a){return "},{i:"___send_message_fa5e194d"},{v:"(a);}\n"}],r:[false],i:{i:"__v26_an_fa5e194d"}},{d:js_void,c:[{v:"var "},{i:"___Model_fa5e194d"},{v:" = {new_author:"},{i:"___new_author_fa5e194d"},{v:",subscribe_for_rooms:"},{i:"___subscribe_for_rooms_fa5e194d"},{v:",unsubscribe_for_rooms:"},{i:"___unsubscribe_for_rooms_fa5e194d"},{v:",create_room:"},{i:"___create_room_fa5e194d"},{v:",get_room_chan:"},{i:"___get_room_chan_fa5e194d"},{v:",join_room:"},{i:"__v24_an_fa5e194d"},{v:",leave_room:"},{i:"__v25_an_fa5e194d"},{v:",send_message:"},{i:"__v26_an_fa5e194d"},{v:"};\n"}],r:[false],i:{i:"___Model_fa5e194d"}}]}]},cont(BslCps_topk)));
global.___subscribe_for_rooms_fa5e194d = function ___subscribe_for_rooms_fa5e194d(a,b,c){return __v1_send_f2f00d5f(__v37_t_fa5e194d)(___rooms_fa5e194d,{client_rooms_chan:b,listen:a},c);};
___subscribe_for_rooms_fa5e194d.distant = true;
global.___unsubscribe_for_rooms_fa5e194d = function ___unsubscribe_for_rooms_fa5e194d(a,b){return __v1_send_f2f00d5f(__v37_t_fa5e194d)(___rooms_fa5e194d,{stoplisten:a},b);};
___unsubscribe_for_rooms_fa5e194d.distant = true;
global.___create_room_fa5e194d = function ___create_room_fa5e194d(a,b){return __v1_send_f2f00d5f(__v37_t_fa5e194d)(___rooms_fa5e194d,{password:a.password,name:a.name,create:a.id},b);};
___create_room_fa5e194d.distant = true;
global.___get_room_chan_fa5e194d = function ___get_room_chan_fa5e194d(a,b,c,d){return __v1_send_f2f00d5f(__v37_t_fa5e194d)(___rooms_fa5e194d,{client_room_chan:c,password:b,get:a},d);};
___get_room_chan_fa5e194d.distant = true;
global.___join_room_fa5e194d = function ___join_room_fa5e194d(a,b,c){return function (d,e,f,g){return ___instantiate_col_ec6de8cf({tl:{nil:js_void},hd:{tl:{tl:__v15_t_ec6de8cf,hd:{ty:a,label:"join"}},hd:{ty:b,label:"chan"}}},c,ccont(g,__v51_an_fa5e194d(d,g,{chan:f,join:e})));};};
___join_room_fa5e194d.distant = true;
global.___leave_room_fa5e194d = function ___leave_room_fa5e194d(a,b){return function (c,d,e){return ___instantiate_col_ec6de8cf({tl:{nil:js_void},hd:{tl:__v15_t_ec6de8cf,hd:{ty:a,label:"leave"}}},b,ccont(e,__v51_an_fa5e194d(c,e,{leave:d})));};};
___leave_room_fa5e194d.distant = true;
global.___send_message_fa5e194d = function ___send_message_fa5e194d(a){return function (b,c,d){return __v1_send_f2f00d5f(a)(b,c,d);};};
___send_message_fa5e194d.distant = true;
function __v28_fun_fa5e194d(a,b,c){return return_tc(c,___leave_room_fa5e194d(a,b));}
function __v29_fun_fa5e194d(a,b){return return_tc(b,___send_message_fa5e194d(a));}
function __v70_an_fa5e194d(a,b){return function (c){return BslCps_topk({new_author:___new_author_fa5e194d,subscribe_for_rooms:___subscribe_for_rooms_fa5e194d,unsubscribe_for_rooms:___unsubscribe_for_rooms_fa5e194d,create_room:___create_room_fa5e194d,get_room_chan:___get_room_chan_fa5e194d,join_room:a,leave_room:b,send_message:c});};}
function __v69_an_fa5e194d(a){return function (b){return return_tc(cont(__v70_an_fa5e194d(a,b)),__v29_fun_fa5e194d);};}
function __v68_an_fa5e194d(a){return return_tc(cont(__v69_an_fa5e194d(a)),__v28_fun_fa5e194d);}
function __v27_fun_fa5e194d(a,b,c,d){return return_tc(d,___join_room_fa5e194d(a,b,c));}
global.___Model_fa5e194d = BslCps_topwait(return_tc(cont(__v68_an_fa5e194d),__v27_fun_fa5e194d));
